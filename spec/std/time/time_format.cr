require "spec"

describe TimeFormat do
  context "Patterns" do
    context "%W" do
      it "should print the week number (Sunday is first day of week)" do
        time_format = TimeFormat.new("%W")

        time_format.format(Time.new(2015,  5, 22)).should eq("20")
        time_format.format(Time.new(2015,  3, 24)).should eq("12")
        time_format.format(Time.new(1989, 10, 26)).should eq("42")
        time_format.format(Time.new(2012,  4, 11)).should eq("14")
        time_format.format(Time.new(2012,  4, 12)).should eq("14")
        time_format.format(Time.new(2012,  4, 13)).should eq("14")
        time_format.format(Time.new(2012,  4, 14)).should eq("14")
        time_format.format(Time.new(2012,  4, 15)).should eq("15")
        time_format.format(Time.new(2012,  4, 16)).should eq("15")
        time_format.format(Time.new(2014,  9,  2)).should eq("35")
        time_format.format(Time.new(1991, 11, 23)).should eq("46")
        time_format.format(Time.new(2000,  1,  1)).should eq("51")
        time_format.format(Time.new(2000, 12, 31)).should eq("51")
        time_format.format(Time.new(2001, 12, 31)).should eq("0")
        time_format.format(Time.new(2009,  4, 21)).should eq("16")
        time_format.format(Time.new(1973,  5, 28)).should eq("22")
        time_format.format(Time.new(1991,  6, 20)).should eq("24")
        time_format.format(Time.new(1976,  1, 18)).should eq("2")
        time_format.format(Time.new(1996,  1, 10)).should eq("2")
        time_format.format(Time.new(2010,  2, 19)).should eq("7")
        time_format.format(Time.new(1971,  4, 18)).should eq("15")
        time_format.format(Time.new(1992,  5, 14)).should eq("19")
        time_format.format(Time.new(1981, 10, 29)).should eq("43")
        time_format.format(Time.new(2011,  8, 24)).should eq("34")
        time_format.format(Time.new(1979, 12,  8)).should eq("49")
        time_format.format(Time.new(1992,  8, 14)).should eq("32")
        time_format.format(Time.new(2013,  8, 20)).should eq("33")
        time_format.format(Time.new(2010, 12, 11)).should eq("49")
        time_format.format(Time.new(1982,  5, 27)).should eq("21")
        time_format.format(Time.new(1993,  2,  6)).should eq("5")
        time_format.format(Time.new(1972,  8,  4)).should eq("31")
        time_format.format(Time.new(1993,  7, 15)).should eq("28")
        time_format.format(Time.new(2011,  2,  1)).should eq("5")
        time_format.format(Time.new(1987,  5, 11)).should eq("19")
        time_format.format(Time.new(1987,  7,  2)).should eq("26")
        time_format.format(Time.new(1983,  8,  2)).should eq("31")
        time_format.format(Time.new(1988, 12,  3)).should eq("48")
        time_format.format(Time.new(1997,  7, 18)).should eq("28")
        time_format.format(Time.new(1976,  1, 26)).should eq("4")
        time_format.format(Time.new(1973, 12, 20)).should eq("51")
        time_format.format(Time.new(1990,  8, 29)).should eq("35")
        time_format.format(Time.new(1979, 12, 18)).should eq("51")
        time_format.format(Time.new(2002, 10,  7)).should eq("40")
        time_format.format(Time.new(2003,  9,  7)).should eq("35")
        time_format.format(Time.new(2002,  1, 25)).should eq("3")
        time_format.format(Time.new(1984,  8, 11)).should eq("32")
        time_format.format(Time.new(1996,  4,  4)).should eq("14")
        time_format.format(Time.new(1983, 11,  9)).should eq("45")
        time_format.format(Time.new(1989,  8, 27)).should eq("34")
        time_format.format(Time.new(1997,  5, 18)).should eq("19")
        time_format.format(Time.new(1982,  8,  8)).should eq("31")
        time_format.format(Time.new(2013, 11, 28)).should eq("47")
        time_format.format(Time.new(2003,  1, 12)).should eq("1")
        time_format.format(Time.new(1999, 12,  3)).should eq("48")
        time_format.format(Time.new(1992,  6, 28)).should eq("25")
        time_format.format(Time.new(1972,  9,  3)).should eq("35")
        time_format.format(Time.new(1987,  7,  4)).should eq("26")
        time_format.format(Time.new(2002, 10, 20)).should eq("41")
        time_format.format(Time.new(2006, 10, 14)).should eq("41")
        time_format.format(Time.new(1993,  1, 11)).should eq("2")
        time_format.format(Time.new(1972,  9,  1)).should eq("35")
        time_format.format(Time.new(1983,  4, 17)).should eq("15")
        time_format.format(Time.new(1985, 10, 10)).should eq("40")
        time_format.format(Time.new(2013, 11, 22)).should eq("46")
        time_format.format(Time.new(2013, 11,  4)).should eq("44")
        time_format.format(Time.new(1985, 10, 27)).should eq("42")
        time_format.format(Time.new(1985, 10, 15)).should eq("41")
        time_format.format(Time.new(1982,  2,  2)).should eq("5")
        time_format.format(Time.new(2012, 12,  6)).should eq("49")
        time_format.format(Time.new(2003,  5, 15)).should eq("19")
        time_format.format(Time.new(1994,  9,  9)).should eq("36")
        time_format.format(Time.new(1993,  9,  9)).should eq("36")
        time_format.format(Time.new(2001,  3, 27)).should eq("13")
        time_format.format(Time.new(1979,  1, 25)).should eq("4")
        time_format.format(Time.new(1983,  9,  6)).should eq("36")
        time_format.format(Time.new(1982, 11, 21)).should eq("46")
        time_format.format(Time.new(2011,  8, 15)).should eq("33")
        time_format.format(Time.new(2001, 12, 12)).should eq("50")
        time_format.format(Time.new(1988,  4, 14)).should eq("15")
        time_format.format(Time.new(1988, 12, 11)).should eq("49")
        time_format.format(Time.new(2008,  6, 14)).should eq("23")
        time_format.format(Time.new(1996,  5, 30)).should eq("22")
        time_format.format(Time.new(1988, 11, 15)).should eq("46")
        time_format.format(Time.new(2015,  4, 23)).should eq("16")
        time_format.format(Time.new(1987,  5,  6)).should eq("18")
        time_format.format(Time.new(2005,  9, 16)).should eq("37")
        time_format.format(Time.new(2008,  3, 28)).should eq("12")
        time_format.format(Time.new(2009,  2, 23)).should eq("8")
        time_format.format(Time.new(1981,  4, 10)).should eq("14")
        time_format.format(Time.new(2013,  9, 21)).should eq("37")
        time_format.format(Time.new(1994,  5,  5)).should eq("18")
        time_format.format(Time.new(2000, 11, 15)).should eq("46")
        time_format.format(Time.new(2000,  2,  2)).should eq("5")
        time_format.format(Time.new(1987, 12, 22)).should eq("51")
        time_format.format(Time.new(1988,  7, 16)).should eq("28")
        time_format.format(Time.new(1995,  6, 27)).should eq("26")
        time_format.format(Time.new(1992, 11, 24)).should eq("47")
        time_format.format(Time.new(1972,  5, 16)).should eq("20")
        time_format.format(Time.new(2006, 10,  5)).should eq("40")
        time_format.format(Time.new(2013, 12, 12)).should eq("49")
        time_format.format(Time.new(1992,  9, 10)).should eq("36")
        time_format.format(Time.new(1974, 11, 11)).should eq("45")
        time_format.format(Time.new(1994, 11, 19)).should eq("46")
        time_format.format(Time.new(1998, 12,  3)).should eq("48")
        time_format.format(Time.new(1970,  4,  7)).should eq("14")
        time_format.format(Time.new(2012,  5, 15)).should eq("20")
        time_format.format(Time.new(2013,  5, 10)).should eq("18")
        time_format.format(Time.new(1987, 10,  2)).should eq("39")
        time_format.format(Time.new(1980,  4,  7)).should eq("14")
        time_format.format(Time.new(1976, 11,  9)).should eq("45")
        time_format.format(Time.new(1981,  9, 30)).should eq("39")
        time_format.format(Time.new(1979,  5, 10)).should eq("19")
        time_format.format(Time.new(1974,  7, 17)).should eq("28")
        time_format.format(Time.new(1972,  3, 26)).should eq("12")
        time_format.format(Time.new(1985,  3, 20)).should eq("11")
      end
    end

    context "%U" do
      it "should print the week number (Monday is first day of week)" do
        time_format = TimeFormat.new("%U")

        time_format.format(Time.new(2015,  5, 22)).should eq("21")
        time_format.format(Time.new(2015,  3, 24)).should eq("13")
        time_format.format(Time.new(1989, 10, 26)).should eq("43")
        time_format.format(Time.new(2012,  4, 11)).should eq("15")
        time_format.format(Time.new(2012,  4, 12)).should eq("15")
        time_format.format(Time.new(2012,  4, 13)).should eq("15")
        time_format.format(Time.new(2012,  4, 14)).should eq("15")
        time_format.format(Time.new(2012,  4, 15)).should eq("15")
        time_format.format(Time.new(2012,  4, 16)).should eq("16")
        time_format.format(Time.new(2014,  9,  2)).should eq("36")
        time_format.format(Time.new(1991, 11, 23)).should eq("47")
        time_format.format(Time.new(2000,  1,  1)).should eq("52")
        time_format.format(Time.new(2000, 12, 31)).should eq("52")
        time_format.format(Time.new(2001, 12, 31)).should eq("1")
        time_format.format(Time.new(2009,  4, 21)).should eq("17")
        time_format.format(Time.new(1973,  5, 28)).should eq("23")
        time_format.format(Time.new(1991,  6, 20)).should eq("25")
        time_format.format(Time.new(1976,  1, 18)).should eq("3")
        time_format.format(Time.new(1996,  1, 10)).should eq("3")
        time_format.format(Time.new(2010,  2, 19)).should eq("8")
        time_format.format(Time.new(1971,  4, 18)).should eq("16")
        time_format.format(Time.new(1992,  5, 14)).should eq("20")
        time_format.format(Time.new(1981, 10, 29)).should eq("44")
        time_format.format(Time.new(2011,  8, 24)).should eq("35")
        time_format.format(Time.new(1979, 12,  8)).should eq("50")
        time_format.format(Time.new(1992,  8, 14)).should eq("33")
        time_format.format(Time.new(2013,  8, 20)).should eq("34")
        time_format.format(Time.new(2010, 12, 11)).should eq("50")
        time_format.format(Time.new(1982,  5, 27)).should eq("22")
        time_format.format(Time.new(1993,  2,  6)).should eq("6")
        time_format.format(Time.new(1972,  8,  4)).should eq("32")
        time_format.format(Time.new(1993,  7, 15)).should eq("29")
        time_format.format(Time.new(2011,  2,  1)).should eq("6")
        time_format.format(Time.new(1987,  5, 11)).should eq("20")
        time_format.format(Time.new(1987,  7,  2)).should eq("27")
        time_format.format(Time.new(1983,  8,  2)).should eq("32")
        time_format.format(Time.new(1988, 12,  3)).should eq("49")
        time_format.format(Time.new(1997,  7, 18)).should eq("29")
        time_format.format(Time.new(1976,  1, 26)).should eq("5")
        time_format.format(Time.new(1973, 12, 20)).should eq("52")
        time_format.format(Time.new(1990,  8, 29)).should eq("36")
        time_format.format(Time.new(1979, 12, 18)).should eq("52")
        time_format.format(Time.new(2002, 10,  7)).should eq("41")
        time_format.format(Time.new(2003,  9,  7)).should eq("36")
        time_format.format(Time.new(2002,  1, 25)).should eq("4")
        time_format.format(Time.new(1984,  8, 11)).should eq("33")
        time_format.format(Time.new(1996,  4,  4)).should eq("15")
        time_format.format(Time.new(1983, 11,  9)).should eq("46")
        time_format.format(Time.new(1989,  8, 27)).should eq("35")
        time_format.format(Time.new(1997,  5, 18)).should eq("20")
        time_format.format(Time.new(1982,  8,  8)).should eq("32")
        time_format.format(Time.new(2013, 11, 28)).should eq("48")
        time_format.format(Time.new(2003,  1, 12)).should eq("2")
        time_format.format(Time.new(1999, 12,  3)).should eq("49")
        time_format.format(Time.new(1992,  6, 28)).should eq("26")
        time_format.format(Time.new(1972,  9,  3)).should eq("36")
        time_format.format(Time.new(1987,  7,  4)).should eq("27")
        time_format.format(Time.new(2002, 10, 20)).should eq("42")
        time_format.format(Time.new(2006, 10, 14)).should eq("42")
        time_format.format(Time.new(1993,  1, 11)).should eq("3")
        time_format.format(Time.new(1972,  9,  1)).should eq("36")
        time_format.format(Time.new(1983,  4, 17)).should eq("16")
        time_format.format(Time.new(1985, 10, 10)).should eq("41")
        time_format.format(Time.new(2013, 11, 22)).should eq("47")
        time_format.format(Time.new(2013, 11,  4)).should eq("45")
        time_format.format(Time.new(1985, 10, 27)).should eq("43")
        time_format.format(Time.new(1985, 10, 15)).should eq("42")
        time_format.format(Time.new(1982,  2,  2)).should eq("6")
        time_format.format(Time.new(2012, 12,  6)).should eq("50")
        time_format.format(Time.new(2003,  5, 15)).should eq("20")
        time_format.format(Time.new(1994,  9,  9)).should eq("37")
        time_format.format(Time.new(1993,  9,  9)).should eq("37")
        time_format.format(Time.new(2001,  3, 27)).should eq("14")
        time_format.format(Time.new(1979,  1, 25)).should eq("5")
        time_format.format(Time.new(1983,  9,  6)).should eq("37")
        time_format.format(Time.new(1982, 11, 21)).should eq("47")
        time_format.format(Time.new(2011,  8, 15)).should eq("34")
        time_format.format(Time.new(2001, 12, 12)).should eq("51")
        time_format.format(Time.new(1988,  4, 14)).should eq("16")
        time_format.format(Time.new(1988, 12, 11)).should eq("50")
        time_format.format(Time.new(2008,  6, 14)).should eq("24")
        time_format.format(Time.new(1996,  5, 30)).should eq("23")
        time_format.format(Time.new(1988, 11, 15)).should eq("47")
        time_format.format(Time.new(2015,  4, 23)).should eq("17")
        time_format.format(Time.new(1987,  5,  6)).should eq("19")
        time_format.format(Time.new(2005,  9, 16)).should eq("38")
        time_format.format(Time.new(2008,  3, 28)).should eq("13")
        time_format.format(Time.new(2009,  2, 23)).should eq("9")
        time_format.format(Time.new(1981,  4, 10)).should eq("15")
        time_format.format(Time.new(2013,  9, 21)).should eq("38")
        time_format.format(Time.new(1994,  5,  5)).should eq("19")
        time_format.format(Time.new(2000, 11, 15)).should eq("49")
        time_format.format(Time.new(2000,  2,  2)).should eq("6")
        time_format.format(Time.new(1987, 12, 22)).should eq("52")
        time_format.format(Time.new(1988,  7, 16)).should eq("29")
        time_format.format(Time.new(1995,  6, 27)).should eq("27")
        time_format.format(Time.new(1992, 11, 24)).should eq("48")
        time_format.format(Time.new(1972,  5, 16)).should eq("21")
        time_format.format(Time.new(2006, 10,  5)).should eq("41")
        time_format.format(Time.new(2013, 12, 12)).should eq("50")
        time_format.format(Time.new(1992,  9, 10)).should eq("37")
        time_format.format(Time.new(1974, 11, 11)).should eq("46")
        time_format.format(Time.new(1994, 11, 19)).should eq("47")
        time_format.format(Time.new(1998, 12,  3)).should eq("49")
        time_format.format(Time.new(1970,  4,  7)).should eq("15")
        time_format.format(Time.new(2012,  5, 15)).should eq("21")
        time_format.format(Time.new(2013,  5, 10)).should eq("19")
        time_format.format(Time.new(1987, 10,  2)).should eq("40")
        time_format.format(Time.new(1980,  4,  7)).should eq("15")
        time_format.format(Time.new(1976, 11,  9)).should eq("46")
        time_format.format(Time.new(1981,  9, 30)).should eq("40")
        time_format.format(Time.new(1979,  5, 10)).should eq("20")
        time_format.format(Time.new(1974,  7, 17)).should eq("29")
        time_format.format(Time.new(1972,  3, 26)).should eq("13")
        time_format.format(Time.new(1985,  3, 20)).should eq("12")
      end
    end
  end
end
